@page "/subtitles/{episodeId:int}"

@inject OpenSubtitlesManager OpenSubtitlesManager

<h3>Subtitles</h3>

@if (_subtitles is null)
{
	<LoadingSpinner  />
}
else
{
	<div class="card">
		<div class="card-body">
			@*<span style="white-space: pre-line">@_subtitles</span>*@
			@foreach (var line in Helper.FormatSubtitles(_subtitles))
			{
				<p>@line</p>
			}
		</div>
	</div>
}

@code {
	[Parameter]
	public int EpisodeId { get; set; }

	private string _subtitles;

	protected async override Task OnInitializedAsync()
	{
		_subtitles = await OpenSubtitlesManager.GetSubtitles(EpisodeId);
	}
}
